---
title: 2. K8s重要组件及常用命令
date: 2022-10-01 00:00:00
permalink: /pages/aa836b/
categories:
  - 容器
  - Kubernetes
tags:
  -
author:
  name: brook-w
  link: https://github.com/brook-w
---

## 1.K8s 重要组件

### 1.kubelet

#### 1.kubelet 概述

**kubectl 是 Kubernetes 集群的命令行工具**，通过 `kubectl` 能够对集群本身进行管理，并能够在集群上进行容器化应用的安装部署。

#### 2.kubectl 命令的语法

```
kubectl [command] [Type] [NAME] [flags]
```

-   command：指定要对资源执行的操作，例如 create、get、describe 和 delete

-   TYPE：指定资源类型，资源类型是大小写敏感的，开发者能够以单数、复数和缩略的 形式。例如：

    >   ```
    >   kubectl get pod pod1
    >   kubectl get pods pod1
    >   kubectl get po pod
    >   ```

- NAME：指定资源的名称，名称也大小写敏感的。如果省略名称，则会显示所有的资源

- flags：指定可选的参数。例如，可用-s 或者–server 参数指定 Kubernetes API server 的地址和端口

#### 3.kubectl 子命令使用分类

-   基础命令

    <table>
    	<tr>
    	    <th>属性</th>
    	    <th>属性值</th>
    	    <th>描述</th>
    	</tr >
    	<tr >
    	    <td rowspan="7">基础命令</td>
    	    <td>create</td>
    	    <td>通过文件名或标准输入创建资源</td>
    	</tr>
    	<tr>
    	    <td>expose</td>
    	    <td>将一个资源公开为一个新的 Service</td>
    	</tr>
    	<tr>
    	    <td>run</td>
    	    <td>在集群中运行一个特定的镜像</td>
    	</tr>
    	<tr>
    	    <td>set</td>
    	    <td>在对象上设置特定的功能</td>
    	</tr>
    	<tr>
            <td>explain</td>
    	    <td>参考官网</td>
    	</tr>
    	<tr>
    	    <td>edit</td>
    	    <td>使用默认的编辑器编辑一个资源</td>
    	</tr>
    	<tr>
    	    <td>delete</td>
    	    <td>通过文件名、标准输入、资源名称或者标签选择器删除资源</td>
    	</tr>
    </table>

-   部署和集群管理命令

    <table>
    	<tr>
    	    <th>属性</th>
    	    <th>属性值</th>
    	    <th>描述</th>
    	</tr >
    	<tr >
    	    <td rowspan="4">基础命令</td>
    	    <td>rollout</td>
    	    <td>管理资源的发布</td>
    	</tr>
    	<tr>
    	    <td>rolling-update</td>
    	    <td>对给定的复制控制器滚动更新</td>
    	</tr>
    	<tr>
    	    <td>scale</td>
    	    <td>扩容或缩容 Pod 数量，Deployment、ReplicaSet、RC 或 Job</td>
    	</tr>
    	<tr>
    	    <td>autoscale</td>
    	    <td>创建一个自动选择扩容或缩容并设置 Pod 数量</td>
    	</tr>
    	<tr>
            <td rowspan="7">集群管理命令</td>
            <td>certificate</td>
    	    <td>修改证书资源</td>
    	</tr>
    	<tr>
    	    <td>cluster-info</td>
    	    <td>显示集群信息</td>
    	</tr>
    	<tr>
    	    <td>top</td>
    	    <td>显示资源（CPU/MEM/Storage）使用，需要 Heapster 运行</td>
    	</tr>
        <tr>
    	    <td>cordon</td>
    	    <td>标记节点不可调度</td>
    	</tr>
        <tr>
    	    <td>uncordon</td>
    	    <td>标记节点可调度</td>
    	</tr>
        <tr>
    	    <td>drain</td>
    	    <td>驱逐节点上的应用，准备下线维护</td>
    	</tr>
        <tr>
    	    <td>taint</td>
    	    <td>修改节点 taint 标记</td>
    	</tr>
    </table>

- 故障和调试命令

    <table>
    	<tr>
    	    <th>属性</th>
    	    <th>属性值</th>
    	    <th>描述</th>
    	</tr >
    	<tr >
    	    <td rowspan="8">故障和调试命令</td>
    	    <td>describe</td>
    	    <td>显示特定资源或者特定资源组的详细信息</td>
    	</tr>
    	<tr>
    	    <td>logs</td>
    	    <td>在一个 Pod 中打印一个容器日志，如果 Pod 中只有一个容器，容器名称时可以选的</td>
    	</tr>
    	<tr>
    	    <td>attach</td>
    	    <td>附加到一个运行的容器</td>
    	</tr>
    	<tr>
    	    <td>exec</td>
    	    <td>执行命令到容器</td>
    	</tr>
        <tr>
    	    <td>port-forward</td>
    	    <td>转发一个或多个本地端口到一个 Pod</td>
    	</tr>
        <tr>
    	    <td>proxy</td>
    	    <td>运行一个 proxy 到 K8s API server</td>
    	</tr>
        <tr>
    	    <td>cp</td>
    	    <td>拷贝文件或目录到容器中</td>
    	</tr>
        <tr>
    	    <td>autn</td>
    	    <td>检查授权</td>
    	</tr>
    </table>

- 其他命令

    <table>
    	<tr>
    	    <th>属性</th>
    	    <th>属性值</th>
    	    <th>描述</th>
    	</tr >
    	<tr >
    	    <td rowspan="4">高级命令</td>
    	    <td>apply</td>
    	    <td>通过文件名或标准输入对资源应用配置</td>
    	</tr>
    	<tr>
    	    <td>patch</td>
    	    <td>使用补丁修改，更新资源的字段</td>
    	</tr>
    	<tr>
    	    <td>replace</td>
    	    <td>通过文件名或标准输入替换一个资源</td>
    	</tr>
    	<tr>
    	    <td>convert</td>
    	    <td>不同的 API 版本之间替换配置文件</td>
    	</tr>
        <tr>
            <td rowspan="3">设置命令</td>
    	    <td>label</td>
    	    <td>更新资源上的标签 Pod</td>
    	</tr>
        <tr>
    	    <td>annotate</td>
    	    <td>更新资源上的注释</td>
    	</tr>
        <tr>
    	    <td>completion</td>
    	    <td>用于实现 kubectl 工具自动补全</td>
    	</tr>
        <tr>
            <td rowspan="5">其他命令</td>
    	    <td>api-versions</td>
    	    <td>打印受支持的 API 版本</td>
    	</tr>
        <tr>
    	    <td>config</td>
    	    <td>修改 kubeconfig 文件（用于访问 API，比如配置认证信息）</td>
    	</tr>
        <tr>
    	    <td>help</td>
    	    <td>所有命令的帮助</td>
    	</tr>
        <tr>
    	    <td>plugin</td>
    	    <td>运行一个命令行插件</td>
    	</tr>
        <tr>
    	    <td>version</td>
    	    <td>打印客户端和服务版本信息</td>
    	</tr>
    </table>

## 2.K8s 常用命令
